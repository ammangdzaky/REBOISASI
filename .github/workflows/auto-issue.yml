name: Auto Issue

on:
  schedule:
    - cron: "0 */6 * * *"  # Tiap 6 jam UTC
  workflow_dispatch:

jobs:
  auto-issue:
    runs-on: ubuntu-latest

    steps:
      - name: Checkout
        uses: actions/checkout@v3

      - name: Install GitHub CLI
        run: |
          sudo apt update
          sudo apt install -y gh

      - name: Buat Issue
        env:
          GITHUB_TOKEN: ${{ secrets.GITHUB_TOKEN }}
        run: |
          mkdir -p .github/ISSUE_TEMPLATE
          echo "ðŸ—“ Tanggal: $(date)" > .github/ISSUE_TEMPLATE/auto-log.md
          echo "" >> .github/ISSUE_TEMPLATE/auto-log.md
          echo "- Commit otomatis berjalan âœ”ï¸" >> .github/ISSUE_TEMPLATE/auto-log.md
          echo "- PR otomatis dikirim âœ”ï¸" >> .github/ISSUE_TEMPLATE/auto-log.md
          echo "- Tidak ada error yang terdeteksi âŒ" >> .github/ISSUE_TEMPLATE/auto-log.md

          gh issue create \
            --title "ðŸ—“ Auto Log - $(date '+%Y-%m-%d %H:%M')" \
            --body-file ".github/ISSUE_TEMPLATE/auto-log.md"
