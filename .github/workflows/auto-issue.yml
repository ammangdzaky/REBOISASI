name: Auto Issue

on:
  schedule:
    - cron: "0 2,10,18 * * *"  # Jalan 3x sehari
  workflow_dispatch:

jobs:
  auto-issue:
    runs-on: ubuntu-latest

    steps:
      - name: Checkout
        uses: actions/checkout@v3

      - name: Install GitHub CLI
        run: |
          sudo apt update
          sudo apt install -y gh

      - name: Buat Issue
        env:
          GITHUB_TOKEN: ${{ secrets.GITHUB_TOKEN }}
        run: |
          echo "🗓 Tanggal: $(date)" > .github/ISSUE_TEMPLATE/auto-log.md
          echo "" >> .github/ISSUE_TEMPLATE/auto-log.md
          echo "- Commit otomatis berjalan ✔️" >> .github/ISSUE_TEMPLATE/auto-log.md
          echo "- PR otomatis dikirim ✔️" >> .github/ISSUE_TEMPLATE/auto-log.md
          echo "- Tidak ada error yang terdeteksi ❌" >> .github/ISSUE_TEMPLATE/auto-log.md

          gh issue create \
            --title "🗓 Auto Log - $(date '+%Y-%m-%d %H:%M')" \
            --body-file ".github/ISSUE_TEMPLATE/auto-log.md"
